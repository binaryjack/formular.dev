<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grid vs Flex Layout Comparison</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .accordion-content {
            transition: max-height 300ms ease-in-out;
            overflow: hidden;
        }
        .accordion-content.collapsed {
            max-height: 0;
        }
        .accordion-content.expanded {
            max-height: 300px; /* This causes the grid "reservation" issue */
        }
        
        .flex-basis-50 { 
            flex: 0 0 calc(50% - 0.5rem); 
            min-width: 0; /* Prevent content overflow */
        }
        .flex-basis-33 { 
            flex: 0 0 calc(33.333% - 0.67rem); 
            min-width: 0; /* Prevent content overflow */
        }
        .flex-basis-25 { 
            flex: 0 0 calc(25% - 0.75rem); 
            min-width: 0; /* Prevent content overflow */
        }
        
        .demo-section {
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 2rem;
        }
    </style>
</head>
<body class="bg-gray-50 p-8">
    <div class="max-w-6xl mx-auto">
        <h1 class="text-3xl font-bold mb-8 text-gray-900">Grid vs Flex Layout for Accordions</h1>
        
        <!-- Grid Layout (Current - with height reservation issue) -->
        <div class="demo-section">
            <h2 class="text-xl font-semibold mb-4 text-red-600">🚨 CSS Grid Layout (Current Issue)</h2>
            <p class="text-gray-600 mb-4">Notice how the grid reserves space for the accordion content even when collapsed.</p>
            
            <div class="grid grid-cols-2 gap-4 items-start"> <!-- items-start fixes it partially but affects other elements -->
                <div class="bg-white p-4 rounded border">
                    <h3 class="font-medium mb-2">Column 1 (with accordion)</h3>
                    <div class="border border-gray-300 rounded mb-4">
                        <button onclick="toggleAccordion('grid-accordion')" 
                                class="w-full p-3 text-left bg-gray-100 border-b hover:bg-gray-200">
                            <div class="flex justify-between items-center">
                                <span>Grid Accordion</span>
                                <span id="grid-arrow">▼</span>
                            </div>
                        </button>
                        <div id="grid-accordion" class="accordion-content collapsed">
                            <div class="p-4">
                                <div class="bg-blue-50 p-3 rounded mb-3">Accordion content 1</div>
                                <div class="bg-blue-50 p-3 rounded mb-3">Accordion content 2</div>
                                <div class="bg-blue-50 p-3 rounded mb-3">Accordion content 3</div>
                                <div class="bg-blue-50 p-3 rounded">This content causes height reservation in grid</div>
                            </div>
                        </div>
                    </div>
                    <div class="bg-gray-50 p-3 rounded">Content below accordion</div>
                </div>
                
                <div class="bg-white p-4 rounded border">
                    <h3 class="font-medium mb-2">Column 2</h3>
                    <div class="bg-green-50 p-3 rounded mb-3">Normal content</div>
                    <div class="bg-green-50 p-3 rounded mb-3">This column is affected by column 1's accordion height</div>
                    <div class="bg-green-50 p-3 rounded">Even when accordion is collapsed</div>
                </div>
            </div>
        </div>
        
        <!-- Flex Layout (Solution - natural column heights) -->
        <div class="demo-section">
            <h2 class="text-xl font-semibold mb-4 text-green-600">✅ Flexbox Layout (Proposed Solution)</h2>
            <p class="text-gray-600 mb-4">Flex allows natural heights - no space reservation, columns are independent.</p>
            
            <div class="flex flex-wrap gap-4">
                <div class="flex-basis-50 bg-white p-4 rounded border">
                    <h3 class="font-medium mb-2">Column 1 (with accordion)</h3>
                    <div class="border border-gray-300 rounded mb-4">
                        <button onclick="toggleAccordion('flex-accordion')" 
                                class="w-full p-3 text-left bg-gray-100 border-b hover:bg-gray-200">
                            <div class="flex justify-between items-center">
                                <span>Flex Accordion</span>
                                <span id="flex-arrow">▼</span>
                            </div>
                        </button>
                        <div id="flex-accordion" class="accordion-content collapsed">
                            <div class="p-4">
                                <div class="bg-blue-50 p-3 rounded mb-3">Accordion content 1</div>
                                <div class="bg-blue-50 p-3 rounded mb-3">Accordion content 2</div>
                                <div class="bg-blue-50 p-3 rounded mb-3">Accordion content 3</div>
                                <div class="bg-blue-50 p-3 rounded">This content doesn't affect other columns in flex!</div>
                            </div>
                        </div>
                    </div>
                    <div class="bg-gray-50 p-3 rounded">Content below accordion</div>
                </div>
                
                <div class="flex-basis-50 bg-white p-4 rounded border">
                    <h3 class="font-medium mb-2">Column 2</h3>
                    <div class="bg-green-50 p-3 rounded mb-3">Normal content</div>
                    <div class="bg-green-50 p-3 rounded mb-3">This column maintains its natural height</div>
                    <div class="bg-green-50 p-3 rounded">Independent of column 1's accordion state</div>
                </div>
            </div>
        </div>
        
        <!-- Enhanced Grid-like Flex Layout Demo -->
        <div class="demo-section">
            <h2 class="text-xl font-semibold mb-4 text-purple-600">🎯 Grid-like Flex Layout (4 Columns)</h2>
            <p class="text-gray-600 mb-4">Demonstrating proportional column widths that adapt to container width, acting like CSS Grid but with natural heights.</p>
            
            <div class="flex flex-wrap gap-4">
                <div class="flex-basis-25 bg-white p-4 rounded border">
                    <h3 class="font-medium mb-2">Col 1 (25%)</h3>
                    <div class="bg-red-50 p-3 rounded mb-3">Short content</div>
                    <div class="bg-red-50 p-3 rounded">Proportional width</div>
                </div>
                
                <div class="flex-basis-25 bg-white p-4 rounded border">
                    <h3 class="font-medium mb-2">Col 2 (25%)</h3>
                    <div class="border border-gray-300 rounded mb-4">
                        <button onclick="toggleAccordion('flex-accordion-4col')" 
                                class="w-full p-3 text-left bg-gray-100 border-b hover:bg-gray-200">
                            <div class="flex justify-between items-center">
                                <span>4-Col Accordion</span>
                                <span id="flex-arrow-4col">▼</span>
                            </div>
                        </button>
                        <div id="flex-accordion-4col" class="accordion-content collapsed">
                            <div class="p-4">
                                <div class="bg-blue-50 p-3 rounded mb-3">Accordion in 25% column</div>
                                <div class="bg-blue-50 p-3 rounded mb-3">Doesn't affect other columns</div>
                                <div class="bg-blue-50 p-3 rounded mb-3">Perfect grid-like behavior</div>
                                <div class="bg-blue-50 p-3 rounded">With natural heights!</div>
                            </div>
                        </div>
                    </div>
                    <div class="bg-gray-50 p-3 rounded">Below accordion</div>
                </div>
                
                <div class="flex-basis-25 bg-white p-4 rounded border">
                    <h3 class="font-medium mb-2">Col 3 (25%)</h3>
                    <div class="bg-green-50 p-3 rounded mb-3">Medium content</div>
                    <div class="bg-green-50 p-3 rounded mb-3">Same width ratio</div>
                    <div class="bg-green-50 p-3 rounded">Independent height</div>
                </div>
                
                <div class="flex-basis-25 bg-white p-4 rounded border">
                    <h3 class="font-medium mb-2">Col 4 (25%)</h3>
                    <div class="bg-orange-50 p-3 rounded mb-3">Content adapts</div>
                    <div class="bg-orange-50 p-3 rounded mb-3">To container width</div>
                    <div class="bg-orange-50 p-3 rounded mb-3">Proportionally</div>
                    <div class="bg-orange-50 p-3 rounded">Like CSS Grid!</div>
                </div>
            </div>
        </div>
        
        <!-- Responsive Flex Layout -->
        <div class="demo-section">
            <h2 class="text-xl font-semibold mb-4 text-indigo-600">📱 Responsive Flex Layout</h2>
            <p class="text-gray-600 mb-4">Columns adapt to screen size: 1 column on mobile, 2 on tablet, 3 on desktop. Resize browser to see effect.</p>
            
            <div class="flex flex-wrap gap-4">
                <div class="w-full md:w-1/2 lg:w-1/3 bg-white p-4 rounded border">
                    <h3 class="font-medium mb-2">Responsive Col 1</h3>
                    <div class="bg-pink-50 p-3 rounded mb-3">100% on mobile</div>
                    <div class="bg-pink-50 p-3 rounded mb-3">50% on tablet</div>
                    <div class="bg-pink-50 p-3 rounded">33% on desktop</div>
                </div>
                
                <div class="w-full md:w-1/2 lg:w-1/3 bg-white p-4 rounded border">
                    <h3 class="font-medium mb-2">Responsive Col 2</h3>
                    <div class="border border-gray-300 rounded mb-4">
                        <button onclick="toggleAccordion('responsive-accordion')" 
                                class="w-full p-3 text-left bg-gray-100 border-b hover:bg-gray-200">
                            <div class="flex justify-between items-center">
                                <span>Responsive Accordion</span>
                                <span id="responsive-arrow">▼</span>
                            </div>
                        </button>
                        <div id="responsive-accordion" class="accordion-content collapsed">
                            <div class="p-4">
                                <div class="bg-teal-50 p-3 rounded mb-3">Works across breakpoints</div>
                                <div class="bg-teal-50 p-3 rounded mb-3">Maintains natural heights</div>
                                <div class="bg-teal-50 p-3 rounded">Grid-like column flow!</div>
                            </div>
                        </div>
                    </div>
                    <div class="bg-gray-50 p-3 rounded">Responsive content</div>
                </div>
                
                <div class="w-full md:w-full lg:w-1/3 bg-white p-4 rounded border">
                    <h3 class="font-medium mb-2">Responsive Col 3</h3>
                    <div class="bg-cyan-50 p-3 rounded mb-3">Wraps naturally</div>
                    <div class="bg-cyan-50 p-3 rounded mb-3">Based on screen size</div>
                    <div class="bg-cyan-50 p-3 rounded">Perfect flex behavior</div>
                </div>
            </div>
        </div>
        
        <!-- Technical Comparison -->
        <div class="demo-section bg-gray-100">
            <h2 class="text-xl font-semibold mb-4">⚖️ Technical Comparison</h2>
            
            <div class="grid md:grid-cols-2 gap-6">
                <div class="bg-white p-4 rounded">
                    <h3 class="font-semibold text-red-600 mb-2">CSS Grid Challenges</h3>
                    <ul class="text-sm space-y-1 text-gray-700">
                        <li>• Row heights shared across columns</li>
                        <li>• <code>align-items: stretch</code> causes height matching</li>
                        <li>• Accordion max-height affects entire row</li>
                        <li>• Complex to achieve natural heights</li>
                        <li>• Better for: uniform layouts, precise alignment</li>
                    </ul>
                </div>
                
                <div class="bg-white p-4 rounded">
                    <h3 class="font-semibold text-green-600 mb-2">Flexbox Benefits</h3>
                    <ul class="text-sm space-y-1 text-gray-700">
                        <li>• Natural column heights (align-self: flex-start)</li>
                        <li>• No cross-column height interference</li>
                        <li>• Accordion content doesn't affect siblings</li>
                        <li>• Responsive flex-basis percentages</li>
                        <li>• Better for: varying content, dynamic layouts</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <!-- Usage Recommendations -->
        <div class="demo-section bg-blue-50">
            <h2 class="text-xl font-semibold mb-4 text-blue-800">📋 Usage Recommendations</h2>
            
            <div class="grid md:grid-cols-2 gap-6">
                <div>
                    <h3 class="font-semibold mb-2">Use Grid FormLayout when:</h3>
                    <ul class="text-sm space-y-1 text-gray-700">
                        <li>• You need precise, uniform alignment</li>
                        <li>• Content heights are similar across columns</li>
                        <li>• Traditional form layouts</li>
                        <li>• No dynamic content (accordions, collapsible sections)</li>
                    </ul>
                </div>
                
                <div>
                    <h3 class="font-semibold mb-2">Use Flex FormLayout when:</h3>
                    <ul class="text-sm space-y-1 text-gray-700">
                        <li>• You have accordions or collapsible content</li>
                        <li>• Content heights vary significantly</li>
                        <li>• Need natural, adaptive layouts</li>
                        <li>• Dynamic content that changes size</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        function toggleAccordion(id) {
            const accordion = document.getElementById(id);
            const arrowId = id.includes('accordion') ? id.replace('accordion', 'arrow') : id + '-arrow';
            const arrow = document.getElementById(arrowId);
            
            if (accordion.classList.contains('collapsed')) {
                accordion.classList.remove('collapsed');
                accordion.classList.add('expanded');
                if (arrow) arrow.textContent = '▲';
            } else {
                accordion.classList.remove('expanded');
                accordion.classList.add('collapsed');
                if (arrow) arrow.textContent = '▼';
            }
        }
    </script>
</body>
</html>
